<!-- gestao/templates/gestao/includes/_filtros_questoes.html -->

<form method="GET" action="{{ form_action_url }}">
    <div class="row g-3 align-items-end">
        
        <!-- Campo de Busca por Termo ou Código -->
        <div class="col-lg-12">
            <label for="q" class="form-label fw-bold">Buscar por palavra-chave ou código</label>
            <div class="input-group">
                <span class="input-group-text"><i class="fas fa-search"></i></span>
                <input type="text" class="form-control" id="q" name="q" value="{{ active_filters.q|default:'' }}" placeholder="Ex: Q123, etc.">
            </div>
        </div>

        <!-- Filtro por Disciplina -->
        <div class="col-lg-3 col-md-6">
            <label for="disciplina" class="form-label fw-bold">Disciplina</label>
            <select name="disciplina" id="disciplina" class="form-select">
                <option value="">Todas</option>
                {% for d in disciplinas_para_filtro %}
                    <option value="{{ d.id }}" {% if active_filters.disciplina == d.id|stringformat:"s" %}selected{% endif %}>{{ d.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Filtro por Banca -->
        <div class="col-lg-3 col-md-6">
            <label for="banca" class="form-label fw-bold">Banca</label>
            <select name="banca" id="banca" class="form-select">
                <option value="">Todas</option>
                {% for b in bancas_para_filtro %}
                    <option value="{{ b.id }}" {% if active_filters.banca == b.id|stringformat:"s" %}selected{% endif %}>{{ b.nome }}</option>
                {% endfor %}
            </select>
        </div>
        
        <!-- Filtro por Instituição -->
        <div class="col-lg-3 col-md-6">
            <label for="instituicao" class="form-label fw-bold">Instituição</label>
            <select name="instituicao" id="instituicao" class="form-select">
                <option value="">Todas</option>
                {% for i in instituicoes_para_filtro %}
                    <option value="{{ i.id }}" {% if active_filters.instituicao == i.id|stringformat:"s" %}selected{% endif %}>{{ i.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Filtro por Ano -->
        <div class="col-lg-3 col-md-6">
            <label for="ano" class="form-label fw-bold">Ano</label>
            <select name="ano" id="ano" class="form-select">
                <option value="">Todos</option>
                {% for a in anos_para_filtro %}
                    <option value="{{ a }}" {% if active_filters.ano == a|stringformat:"s" %}selected{% endif %}>{{ a }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Botões de Ação -->
        <div class="col-12 text-center mt-4">
            <button type="submit" class="btn btn-primary px-5">
                <i class="fas fa-filter me-2"></i>Aplicar Filtros
            </button>
            <a href="{{ form_action_url }}" class="btn btn-outline-secondary px-4 ms-2">
                Limpar
            </a>
        </div>
    </div>
</form>