<!-- gestao/templates/gestao/includes/_modais_gestao_questoes.html -->

<!-- Modal genérico para Adicionar Entidade Simples (Disciplina, Banca, Instituição) -->
<div class="modal fade" id="addEntidadeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title">Adicionar</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
            <div class="modal-body">
                <form id="form-add-entidade">
                    {% csrf_token %}
                    <input type="hidden" name="tipo_entidade" id="input-tipo-entidade">
                    <label for="input-nome-entidade" class="form-label">{{ entidade_simples_form.nome.label }}:</label>
                    {{ entidade_simples_form.nome }}
                    <div class="invalid-feedback"></div>
                </form>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary"><span class="spinner-border spinner-border-sm" style="display: none;"></span><span class="btn-text">Salvar</span></button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para Adicionar Assunto -->
<div class="modal fade" id="addAssuntoModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title">Adicionar Novo Assunto</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
            <div class="modal-body">
                <form id="form-add-assunto">
                    {% csrf_token %}
                    <div class="mb-3"><label for="{{ assunto_form.disciplina.id_for_label }}" class="form-label">{{ assunto_form.disciplina.label }}:</label>{{ assunto_form.disciplina }}</div>
                    <div class="mb-3"><label for="{{ assunto_form.nome.id_for_label }}" class="form-label">{{ assunto_form.nome.label }}:</label>{{ assunto_form.nome }}<div class="invalid-feedback"></div></div>
                </form>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary"><span class="spinner-border spinner-border-sm" style="display: none;"></span><span class="btn-text">Salvar Assunto</span></button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para Deletar Questão -->
<div class="modal fade" id="deletarQuestaoModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <form id="form-deletar-questao" method="POST" action="">
                {% csrf_token %}
                <div class="modal-header bg-danger text-white"><h5 class="modal-title">Confirmar Exclusão</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
                <div class="modal-body">
                    <p>Deseja excluir permanentemente a questão <strong id="codigo-para-deletar"></strong>? Esta ação não pode ser desfeita.</p>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-danger"><span class="spinner-border spinner-border-sm" style="display: none;"></span><span class="btn-text">Sim, Excluir</span></button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal para Visualização Rápida de Questão -->
<div class="modal fade" id="visualizarQuestaoModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title">Visualizando Questão: <span id="modalQuestaoCodigo" class="fw-bold">...</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
            <div class="modal-body">
                <div id="modalQuestaoSpinner" class="text-center p-5"><div class="spinner-border text-primary" role="status"></div></div>
                <div id="modalQuestaoContent" style="display: none;">
                    <h6>Enunciado:</h6>
                    <div id="modalQuestaoEnunciado" class="enunciado-formatado mb-4 p-3 bg-light rounded"></div>
                    <h6>Alternativas:</h6>
                    <ul id="modalQuestaoAlternativas" class="list-group"></ul>
                </div>
            </div>
            <div class="modal-footer d-flex justify-content-center"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button></div>
        </div>
    </div>
</div>