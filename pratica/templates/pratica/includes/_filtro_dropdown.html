<!-- pratica/includes/_filtro_dropdown.html -->



<div class="dropdown d-grid">
    <!-- ✅ ADIÇÃO: Classe 'btn-filter' e 'd-flex' para controlar o alinhamento interno -->
    <button class="btn btn-outline-secondary dropdown-toggle btn-filter d-flex justify-content-between align-items-center {% if selected_ids %}active{% endif %}" type="button" 
            id="dropdown{{ prefix|default:'' }}{{ name|capfirst }}" 
            data-bs-toggle="dropdown" 
            data-bs-auto-close="outside" 
            aria-expanded="false"
            {% if name == 'assunto' %}disabled{% endif %}>
        
        <!-- O texto do botão -->
        <span>{{ label }}</span>
        
        <!-- O contador (badge) -->
        <span class="badge rounded-pill ms-1" id="count-{{ prefix }}{{ name }}" style="{% if not selected_ids %}display: none;{% endif %}">
              {{ selected_ids|length }}
        </span>
    </button>
    
    <ul class="dropdown-menu p-0" aria-labelledby="dropdown{{ prefix|default:'' }}{{ name|capfirst }}" id="options-{{ prefix }}{{ name }}">
        {% if name != 'assunto' %}
            <li class="search-input-container">
                <input type="text" class="form-control form-control-sm" placeholder="Busca rápida..." onkeyup="filterDropdownOptions(this)">
            </li>
        {% endif %}
        <div class="dropdown-options-container">
            {% if name != 'assunto' %}
                {% for item in items %}
                <li>
                    <div class="form-check">
                        {% if is_simple_list %}
                            <input class="form-check-input" type="checkbox" name="{{ prefix }}{{ name }}" value="{{ item }}" id="{{ prefix }}{{ name }}-{{ item }}" {% if item|stringformat:"s" in selected_ids|stringformat:"s" %}checked{% endif %}>
                            <label class="form-check-label" for="{{ prefix }}{{ name }}-{{ item }}">{{ item }}</label>
                        {% else %}
                            <input class="form-check-input" type="checkbox" name="{{ prefix }}{{ name }}" value="{{ item.id }}" id="{{ prefix }}{{ name }}-{{ item.id }}" {% if item.id in selected_ids %}checked{% endif %}>
                            <label class="form-check-label" for="{{ prefix }}{{ name }}-{{ item.id }}">{{ item.nome }}</label>
                        {% endif %}
                    </div>
                </li>
                {% endfor %}
            {% else %}
                 <li class="p-3 text-center text-muted"><small>Selecione uma disciplina para carregar os assuntos.</small></li>
            {% endif %}
        </div>
    </ul>
</div>