<!-- simulados/templates/simulados/listar_simulados_oficiais.html -->

{% extends 'base.html' %}
{% load static %}
{% load gestao_extras %}

{% block title %}Biblioteca de Simulados{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/listagem-comum.css' %}">
<style>
    .simulado-card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; border-left: 4px solid var(--cor-primaria); display: flex; flex-direction: column; }
    
    .badge-oficial { font-size: 0.7em; font-weight: 600; letter-spacing: 0.5px; }
    .badge-disciplina { font-size: 0.75em; background-color: #e9ecef !important; color: #495057 !important; }
    .filter-card, .filter-card .collapse { overflow: visible; }
    .dropdown { position: relative; }
    
    /* ======================================================================= */
    /* INÍCIO DA CORREÇÃO: Adicionando os estilos para os badges de dificuldade */
    /* ======================================================================= */
    .bg-facil-soft { background-color: rgba(25, 135, 84, 0.1); }
    .text-facil { color: #146c43 !important; }
    .bg-medio-soft { background-color: rgba(255, 193, 7, 0.15); }
    .text-medio { color: #997404 !important; }
    .bg-dificil-soft { background-color: rgba(220, 53, 69, 0.1); }
    .text-dificil { color: #b02a37 !important; }
    /* ======================================================================= */
    /* FIM DA CORREÇÃO */
    /* ======================================================================= */
</style>
{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
        <h1 class="h3 mb-0">Biblioteca de Simulados Oficiais</h1>
        <a href="{% url 'simulados:listar_simulados' %}" class="btn btn-outline-secondary btn-sm"><i class="fas fa-arrow-left me-2"></i>Voltar para Vitrine</a>
    </div>

    {% include 'simulados/includes/_filtros_simulados_oficiais.html' %}
    {% include 'gestao/includes/_ordenacao_e_paginacao_controls.html' with paginated_object=simulados %}

    <div class="row g-4">
        {% for simulado in simulados %}
        <div class="col-lg-4 col-md-6">
            {% include 'simulados/includes/_simulado_card_oficial.html' with simulado=simulado %}
        </div>
        {% empty %}
        <div class="col-12">
            <div class="card card-body text-center p-5 bg-light"><i class="fas fa-search fa-3x text-muted mb-3"></i><h5 class="text-muted">Nenhum simulado encontrado.</h5><p><a href="{% url 'simulados:listar_simulados_oficiais' %}">Limpe os filtros</a> para ver todos.</p></div>
        </div>
        {% endfor %}
    </div>

    <div class="mt-5">
        {% include 'includes/_paginacao.html' with paginated_object=simulados %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/filtros-questoes-avancado.js' %}"></script>
{% endblock %}